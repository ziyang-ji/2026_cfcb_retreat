<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 ä¸­åå½’ä¸»æ•™ä¼šå¤å­£é€€ä¿®ä¼š</title>
    <link rel="icon" type="image/jpeg" href="icon.jpg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>2026 ä¸­åå½’ä¸»æ•™ä¼šå¤å­£é€€ä¿®ä¼š</h1>
            <p class="subtitle">2026 Chinese For Christ Church Summer Retreat</p>
            <p class="subtitle">Welcome back, <span id="user-name">User</span>!</p>
            <div class="header-actions">
                <button class="btn-header btn-signout" onclick="signOut()">ç™»å‡º / Sign Out</button>
            </div>
        </header>

        <div class="dashboard-container">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-icon">ğŸ‘¤</div>
                    <div class="card-content">
                        <div class="card-number" id="individual-count">0</div>
                        <div class="card-label">ä¸ªäººæŠ¥å / Individual Registrations</div>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                    <div class="card-content">
                        <div class="card-number" id="family-count">0</div>
                        <div class="card-label">å®¶åº­æŠ¥å / Family Registrations</div>
                    </div>
                </div>
            </div>

            <!-- Individual Registrations -->
            <section class="dashboard-section">
                <h2>ğŸ‘¤ ä¸ªäººæŠ¥å / Individual Registrations</h2>
                <div id="individual-registrations">
                    <div class="empty-state">
                        <p>æ‚¨è¿˜æ²¡æœ‰ä¸ªäººæŠ¥åã€‚/ You haven't registered individually yet.</p>
                        <button class="btn btn-primary" onclick="location.href='register.html'">åˆ›å»ºä¸ªäººæŠ¥å / Create Individual Registration</button>
                    </div>
                </div>
            </section>

            <!-- Family Registrations -->
            <section class="dashboard-section">
                <h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­æŠ¥å / Family Registrations</h2>
                <div id="family-registrations">
                    <div class="empty-state">
                        <p>æ‚¨è¿˜æ²¡æœ‰åŠ å…¥ä»»ä½•å®¶åº­æŠ¥åã€‚/ You're not part of any family registration yet.</p>
                        <button class="btn btn-primary" onclick="location.href='register.html'">åˆ›å»ºå®¶åº­æŠ¥å / Create Family Registration</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="loading-overlay">
            <div class="spinner"></div>
            <p>æ­£åœ¨åŠ è½½æ‚¨çš„æŠ¥åä¿¡æ¯... / Loading your registrations...</p>
        </div>

        <!-- Sign Out Confirmation Modal -->
        <div id="signout-modal" class="modal">
            <div class="modal-content">
                <h2>ç™»å‡º / Sign Out</h2>
                <p>æ‚¨ç¡®å®šè¦ç™»å‡ºå—ï¼Ÿ/ Are you sure you want to sign out?</p>
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="closeSignOutModal()">å–æ¶ˆ / Cancel</button>
                    <button class="btn btn-primary" onclick="confirmSignOut()">ç™»å‡º / Sign Out</button>
                </div>
            </div>
        </div>

        <!-- Edit Registration Modal -->
        <div id="edit-modal" class="modal">
            <div class="modal-content modal-large">
                <h2>ç¼–è¾‘æŠ¥å / Edit Registration</h2>
                <form onsubmit="saveEdit(event)">
                    <input type="hidden" id="edit-id">
                    <input type="hidden" id="edit-family-id">
                    <div class="form-group">
                        <label for="edit-name">å§“å / Name</label>
                        <input type="text" id="edit-name" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-phone">ç”µè¯ / Phone</label>
                        <input type="tel" id="edit-phone" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-email">ç”µå­é‚®ç®± / Email</label>
                        <input type="email" id="edit-email" required>
                    </div>
                    <div class="form-group">
                        <label for="edit-address">åœ°å€ / Address</label>
                        <textarea id="edit-address" rows="3" required></textarea>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">å–æ¶ˆ / Cancel</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜æ›´æ”¹ / Save Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="modal">
            <div class="modal-content">
                <h2>åˆ é™¤æŠ¥å / Delete Registration</h2>
                <p id="delete-message">æ‚¨ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæŠ¥åå—ï¼Ÿ/ Are you sure you want to delete this registration?</p>
                <input type="hidden" id="delete-id">
                <input type="hidden" id="delete-family-id">
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="closeDeleteModal()">å–æ¶ˆ / Cancel</button>
                    <button class="btn btn-primary" style="background: #f44336;" onclick="confirmDelete()">åˆ é™¤ / Delete</button>
                </div>
            </div>
        </div>

        <!-- Delete Family Confirmation Modal -->
        <div id="delete-family-modal" class="modal">
            <div class="modal-content">
                <h2 style="color: #f44336;">âš ï¸ åˆ é™¤æ•´ä¸ªå®¶åº­ / Delete Entire Family</h2>
                <p id="delete-family-message" style="font-weight: 600;">æ‚¨ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå®¶åº­å—ï¼Ÿ/ Are you sure you want to delete this family?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">
                    è¿™å°†æ°¸ä¹…åˆ é™¤ / This will permanently delete:
                </p>
                <ul style="color: #666; font-size: 0.9rem; margin: 0.5rem 0 1rem 1.5rem; line-height: 1.8;">
                    <li>å®¶åº­æŠ¥å / The family registration</li>
                    <li>æ‰€æœ‰å®¶åº­æˆå‘˜ / All family members (<span id="delete-family-count">0</span> äºº/people)</li>
                    <li>æ­¤æ“ä½œæ— æ³•æ’¤é”€ / This action cannot be undone</li>
                </ul>
                <input type="hidden" id="delete-family-id-input">
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="closeDeleteFamilyModal()">å–æ¶ˆ / Cancel</button>
                    <button class="btn btn-primary" style="background: #f44336;" onclick="confirmDeleteFamily()">ç¡®è®¤åˆ é™¤ / Yes, Delete Everything</button>
                </div>
            </div>
        </div>

        <!-- Quit Family Confirmation Modal -->
        <div id="quit-family-modal" class="modal">
            <div class="modal-content">
                <h2 style="color: #ff9800;">âš ï¸ é€€å‡ºå®¶åº­ / Quit Family</h2>
                <p id="quit-family-message" style="font-weight: 600;">æ‚¨ç¡®å®šè¦é€€å‡ºè¿™ä¸ªå®¶åº­å—ï¼Ÿ/ Are you sure you want to quit this family?</p>
                <p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">
                    è¿™å°†æ°¸ä¹…åˆ é™¤ / This will permanently delete:
                </p>
                <ul style="color: #666; font-size: 0.9rem; margin: 0.5rem 0 1rem 1.5rem; line-height: 1.8;">
                    <li>æ‚¨åœ¨æ­¤å®¶åº­ä¸­çš„æ‰€æœ‰æŠ¥å / All your registrations in this family (<span id="quit-family-count">0</span> äºº/people)</li>
                    <li>å…¶ä»–å®¶åº­æˆå‘˜å°†ä¿ç•™åœ¨å®¶åº­ä¸­ / Other family members will remain in the family</li>
                    <li>æ­¤æ“ä½œæ— æ³•æ’¤é”€ / This action cannot be undone</li>
                </ul>
                <input type="hidden" id="quit-family-id-input">
                <div class="modal-buttons">
                    <button class="btn btn-secondary" onclick="closeQuitFamilyModal()">å–æ¶ˆ / Cancel</button>
                    <button class="btn btn-primary" style="background: #ff9800;" onclick="confirmQuitFamily()">ç¡®è®¤é€€å‡º / Yes, Quit Family</button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="success-modal" class="modal">
            <div class="modal-content">
                <h2>âœ… æˆåŠŸ / Success</h2>
                <p id="success-message">æ“ä½œæˆåŠŸå®Œæˆ / Operation completed successfully</p>
                <div class="modal-buttons">
                    <button class="btn btn-primary" onclick="closeSuccessModal()">ç¡®å®š / OK</button>
                </div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>
